<h1>Ruas Jalan</h1>
<h2>Powered by Kronologger API</h2>
<script>
function success(position) {
  var s = document.querySelector('#status');

  if (s.className == 'success') {
    // not sure why we're hitting this twice in FF, I think it's to do with a cached result coming back
    return;
  }

  s.innerHTML = "We found you!";
  s.className = 'success';

  var mapcanvas = document.createElement('div');
  mapcanvas.id = 'mapcanvas';
  mapcanvas.style.left = '10px';
  mapcanvas.style.height = '250px';
  mapcanvas.style.width = '80%';

  document.querySelector('article').appendChild(mapcanvas);

  var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

  var myOptions = {
    zoom: 13,
    center: latlng,
    mapTypeControl: false,
    navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var map = new google.maps.Map(document.getElementById("mapcanvas"), myOptions);

  var marker = new google.maps.Marker({
      position: latlng,
      map: map,
      title:"You are here! (at least within a "+position.coords.accuracy+" meter radius)"
 });
    document.cookie="latitude-cookies=" +position.coords.latitude;
      document.cookie="longitude-cookies=" +position.coords.longitude;

     <?php
             $cookies_php_lat = $_COOKIE['latitude-cookies'];
          $cookies_php_lon = $_COOKIE['longitude-cookies'];
      if ($cookies_php_lat=="" && $cookies_php_lon=="") {
        ?>
        window.location = "<?php echo $url_refresh ?>"
        <?php
      }

    ?>


       marker.setMap(map);


          var spotArea = {
          strokeColor: "#AA0000",
          strokeOpacity: 0.1,
          strokeWeight: 2,
          fillColor: "#AA0000",
          fillOpacity: 0.35,
          map: map,
          center: latlng,
          radius: 1500
        };
        cityCircle = new google.maps.Circle(spotArea)


}

function error(msg) {
  var s = document.querySelector('#status');
  s.innerHTML = typeof msg == 'string' ? msg : "failed";
  s.className = 'fail';

  // console.log(arguments);
}

if (navigator.geolocation) {
  navigator.geolocation.getCurrentPosition(success, error);

} else {
  error('not supported');
}
</script>
<?
 $cookies_php_lat = $_COOKIE['latitude-cookies'];
 $cookies_php_lon = $_COOKIE['longitude-cookies'];
 $url_refresh="index.php";

?>
<br>Latitude  : <? echo $cookies_php_lat ?>
<br>Longitude : <? echo $cookies_php_lon?>

